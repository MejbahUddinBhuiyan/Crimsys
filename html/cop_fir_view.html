<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>FIR Details – CRIMSYS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/Crimsys/css/styles.css" rel="stylesheet">

  <style>
    /* --------- Glass primitives (kept) --------- */
    .glass{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.16);
      backdrop-filter:blur(12px) saturate(140%);-webkit-backdrop-filter:blur(12px) saturate(140%);
      border-radius:16px;box-shadow:0 18px 40px rgba(0,0,0,.35)}
    .glass-body{padding:18px}
    .title{color:#fff;font-weight:800;letter-spacing:.06em;text-transform:uppercase}
    .section-title{color:#fff;font-weight:700}
    .k{width:130px;color:#ddd}
    .v,.subtle,.muted{color:#fff}
    .row-dash{border-top:1px dashed rgba(255,255,255,.18);margin-top:12px;padding-top:12px}

    /* --------- Buttons (kept) --------- */
    .btn-glass{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.22);color:#fff;
      border-radius:14px;padding:.45rem .9rem;transition:transform .06s, box-shadow .12s, background .2s}
    .btn-glass:hover{transform:translateY(-1px);box-shadow:0 6px 20px rgba(0,0,0,.3);background:rgba(255,255,255,.12)}
    .btn-glass:active{transform:translateY(0)}
    .btn-glass-accent{background:rgba(225,29,72,.22);border-color:rgba(225,29,72,.45)}
    .btn-glass-accent:hover{background:rgba(225,29,72,.32)}
    .btn-glass-danger{background:rgba(239,68,68,.16);border-color:rgba(239,68,68,.4)}
    .btn-glass-danger:hover{background:rgba(239,68,68,.26)}
    .btn-glass-outline{background:transparent;border-color:rgba(255,255,255,.26)}

    /* Phase-3 button polish */
    .btn-reassign:hover{
      box-shadow:0 10px 28px rgba(225,29,72,.35), inset 0 0 0 1px rgba(225,29,72,.35);
      background:rgba(225,29,72,.18);
    }
    /* NEW: hover effect for “+ Add note” */
    .btn-add-note:hover{
      box-shadow:0 10px 28px rgba(225,29,72,.35), inset 0 0 0 1px rgba(225,29,72,.35);
      background:rgba(225,29,72,.18);
    }

    /* --------- Evidence cards (kept) --------- */
    .ev-card{border-radius:18px;padding:14px}
    .thumb{width:100%;height:210px;object-fit:cover;border-radius:12px;background:#1b1b1b}
    .ev-actions{display:flex;gap:.6rem;flex-wrap:wrap}
    .fab-upload{position:absolute;right:18px;top:12px;display:inline-flex;align-items:center;gap:.5rem}

    /* --------- Overlays / Modals (kept + reused) --------- */
    .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:9999;
      background:rgba(0,0,0,.45);backdrop-filter:blur(2px)}
    .overlay.show{display:flex}
    .modal-glass{width:min(520px,92vw);padding:20px}
    .modal-title{color:#fff;font-weight:700;font-size:1.15rem;margin-bottom:.75rem}
    .modal-actions{display:flex;gap:.6rem;justify-content:flex-end;margin-top:16px}

    /* --------- Tags (kept) --------- */
    .pill{display:inline-block;font-size:.85rem;padding:.18rem .6rem;border-radius:999px;
      border:1px solid rgba(255,255,255,.24);color:#fff;margin-right:.45rem}
    .status-open{background:rgba(16,185,129,.16);border:1px solid rgba(16,185,129,.4);color:#8CF4C2}

    /* --------- Phase-3 layout only (new) --------- */
    .cm-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width: 768px){.cm-grid{grid-template-columns:1fr}}

    /* Dark, glassy select */
    .select-glass{
      appearance:none;-webkit-appearance:none;-moz-appearance:none;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.22);
      color:#fff;border-radius:12px;
      padding:.55rem 2.25rem .55rem .8rem;width:100%;
      line-height:1.25;
      backdrop-filter:blur(12px) saturate(140%);
      color-scheme: dark;
      background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
      background-repeat:no-repeat;background-position:right .6rem center;background-size:18px 18px;
    }
    .select-glass option{background:#191418;color:#fff}

    /* Notes list */
    .note-item{border-left:3px solid rgba(225,29,72,.5);padding-left:.65rem;margin:.5rem 0}
    .note-text{color:#fff;}          /* NEW: brighter note text */
    .note-meta{color:#cbd5e1;font-size:.85rem}

    /* Timeline list */
    .tl-item{display:flex;gap:.7rem;margin:.6rem 0}
    .tl-dot{width:10px;height:10px;border-radius:50%;background:#ef4444;margin-top:.4rem}
    .tl-body{color:#fff}
  </style>
</head>

<body class="radish-black-bg body radish-black-bg">

  <!-- Top bar (kept) -->
  <nav class="navbar navbar-dark topbar">
    <div class="container grid-topbar">
      <div class="pos-left">
        <a class="btn btn-outline-accent btn-sm" href="/Crimsys/html/cop_fir_list.html">← Back</a>
      </div>
      <div class="pos-center"></div>
      <div class="pos-right"><a class="brand-logo" href="/Crimsys/">CRIMSYS</a></div>
    </div>
  </nav>

  <!-- Message banner (kept) -->
  <div id="msg" class="glass glass-body text-center d-none" style="max-width:1100px;margin:12px auto 0;color:#fff;"></div>

  <main class="container py-4" style="max-width:1100px">

    <!-- ===== PHASE 1: Header (kept) ===== -->
    <div class="glass glass-body mb-3 d-flex justify-content-between align-items-center">
      <h4 class="title mb-0">FIR Details</h4>
      <div class="muted small">FIR ID: <span id="firIdHdr">—</span></div>
    </div>

    <!-- ===== PHASE 1: Overview (kept) ===== -->
    <div class="glass glass-body mb-3 position-relative">
      <div class="d-flex flex-wrap align-items-center gap-2">
        <span class="pill"><span class="k">Filed On</span> <span id="ovDate" class="v">—</span></span>
        <span class="pill"><span class="k">Crime Type</span> <span id="ovCrime" class="v">—</span></span>
        <span class="pill"><span class="k">Assigned</span> <span id="ovAssigned" class="v">—</span></span>
        <span id="ovStatus" class="pill status-open">Open</span>
      </div>
      <div class="row-dash">
        <div class="row g-2">
          <div class="col-md-6"><span class="k">Location</span> <span id="ovLoc" class="v">—</span></div>
          <div class="col-md-6"><span class="k">Reported By</span> <span id="ovFiledBy" class="v">—</span></div>
        </div>
        <div class="mt-2"><span class="k">Summary</span> <span id="ovDesc" class="v">—</span></div>
        <div class="mt-2"><span class="k">Suspected Info</span> <span id="ovSus" class="v">—</span></div>
      </div>
    </div>

    <!-- ===== PHASE 1: Victims / Witnesses (kept) ===== -->
    <div class="glass glass-body mb-3">
      <h5 class="section-title mb-2">Victims & Witnesses</h5>
      <div id="vwList" class="muted">—</div>
    </div>

    <!-- ===== PHASE 1: Suspects (kept) ===== -->
    <div class="glass glass-body mb-3">
      <h5 class="section-title mb-2">Suspects & Accused</h5>
      <div id="susList" class="muted">—</div>
    </div>

    <!-- ===== PHASE 2: Evidence (kept) ===== -->
    <div class="glass glass-body mb-3 position-relative">
      <h5 class="section-title mb-2">Evidence</h5>
      <div class="fab-upload">
        <button id="btnUpload" class="btn-glass btn-glass-accent">+ Upload</button>
      </div>
      <div id="evGrid" class="row g-3"></div>
    </div>

    <!-- ===== PHASE 3: Case Management (UI only) ===== -->
    <div class="glass glass-body mb-3">
      <h5 class="section-title mb-2">Case Management</h5>

      <div class="cm-grid">
        <!-- Change Status -->
        <div>
          <div class="k mb-1">Change Status</div>
          <select id="cmStatus" class="select-glass">
            <option value="Open">Open</option>
            <option value="Under Investigation">Under Investigation</option>
            <option value="Resolved">Resolved</option>
          </select>
          <div class="mt-2 d-flex gap-2">
            <button id="cmSaveStatus" class="btn-glass btn-glass-accent">Save</button>
          </div>
          <div class="small muted mt-1" id="cmStatusHint">Select a new status and click Save.</div>
        </div>

        <!-- Reassign Officer -->
        <div>
          <div class="k mb-1">Assignment</div>
          <div><span class="v">Current: </span><span id="asOfficer" class="v">—</span></div>
          <div class="mt-2 d-flex gap-2">
            <button id="btnReassign" class="btn-glass btn-glass-outline btn-reassign">Reassign</button>
          </div>
          <div class="small muted mt-1">Reassign this FIR to another officer.</div>
        </div>
      </div>

      <hr class="mt-3" style="border-color:rgba(255,255,255,.12)">

      <!-- Notes -->
      <div class="d-flex justify-content-between align-items-center">
        <h6 class="section-title mb-0">Notes</h6>
        <button id="btnAddNote" class="btn-glass btn-glass-outline btn-add-note">+ Add note</button>
      </div>
      <div id="noteList" class="mt-2"></div>
    </div>

    <!-- ===== PHASE 1 (kept): Assignment & Status quick view ===== -->
    <div class="glass glass-body mb-3">
      <h5 class="section-title mb-2">Assignment & Status</h5>
      <div><span class="k">Assigned Officer</span> <span id="asOfficerView" class="v">—</span></div>
      <div class="mt-2"><span class="k">Status</span> <span id="asStatus" class="pill status-open">Open</span></div>
    </div>

    <!-- ===== PHASE 3: Timeline (read-only UI) ===== -->
    <div class="glass glass-body mb-4">
      <h5 class="section-title mb-2">Timeline</h5>
      <div id="tl" class="muted">—</div>
    </div>
  </main>

  <!-- Modals (kept) -->
  <div id="overlayConfirm" class="overlay">
    <div class="modal-glass glass">
      <div class="modal-title">Confirm</div>
      <div id="confirmText" style="color:#eee">Are you sure?</div>
      <div class="modal-actions">
        <button id="confirmCancel" class="btn-glass btn-glass-outline">Cancel</button>
        <button id="confirmOk" class="btn-glass btn-glass-danger">Delete</button>
      </div>
    </div>
  </div>

  <div id="overlayUpload" class="overlay">
    <div class="modal-glass glass">
      <div class="modal-title">Upload Evidence</div>
      <div class="mb-3">
        <label class="form-label text-light">Caption</label>
        <input id="upCaption" class="form-control" placeholder="e.g., CCTV still at 5:42 PM"/>
      </div>
      <div>
        <label class="form-label text-light">File</label>
        <input id="upFile" type="file" class="form-control" accept="image/*,video/*,application/pdf"/>
      </div>
      <div class="modal-actions">
        <button id="upCancel" class="btn-glass btn-glass-outline">Cancel</button>
        <button id="upDo" class="btn-glass btn-glass-accent">Upload</button>
      </div>
    </div>
  </div>

  <!-- Phase-3 Modals -->
  <div id="overlayAssign" class="overlay">
    <div class="modal-glass glass">
      <div class="modal-title">Reassign Officer</div>
      <div class="mb-3">
        <label class="form-label text-light">New Cop ID</label>
        <input id="asgCopId" class="form-control" placeholder="e.g., 10000005">
      </div>
      <div class="mb-1">
        <label class="form-label text-light">Reason (optional)</label>
        <input id="asgReason" class="form-control" placeholder="e.g., workload balancing">
      </div>
      <div class="modal-actions">
        <button id="asgCancel" class="btn-glass btn-glass-outline">Cancel</button>
        <button id="asgSave" class="btn-glass btn-glass-accent">Save</button>
      </div>
    </div>
  </div>

  <div id="overlayNote" class="overlay">
    <div class="modal-glass glass">
      <div class="modal-title btn btn-accent w-100">Add Note</div>
      <div class="mb-3">
        <label class="form-label text-light">Note</label>
        <textarea id="noteText" rows="4" class="form-control" placeholder="Add a case note..."></textarea>
      </div>
      <div class="modal-actions">
        <button id="noteCancel" class="btn-glass btn-glass-outline">Cancel</button>
        <button id="noteSave" class="btn-glass btn-glass-accent">Save Note</button>
      </div>
    </div>
  </div>
    <!-- ===== PHASE 4: Case Closure ===== -->
    <div class="glass glass-body mb-4" style="max-width:1100px; margin:auto;">
      <h5 class="section-title mb-2">Case Closure</h5>
      <div class="mb-3">
        <label class="form-label text-light">Final Remarks</label>
        <textarea id="closeRemarks" rows="3" class="form-control" placeholder="Enter closing remarks..."></textarea>
      </div>
      <div class="mb-3">
        <label class="form-label text-light">Closure Type</label>
        <select id="closeType" class="select-glass">
          <option value="Resolved">Resolved</option>
          <option value="Transferred">Transferred</option>
          <option value="Dismissed">Dismissed</option>
        </select>
      </div>
      <div class="d-flex justify-content-end">
        <button id="btnClose" class="btn-glass btn-glass-danger">Mark as Resolved</button>
      </div>
    </div>


  <script src="/Crimsys/js/cop_fir_view.js"></script>
</body>
</html>
